<!--
Nicholas Dunlop 200451488
Registration Page: allows users to sign up for an "Account".
-->
<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<link rel="stylesheet" href="../css/style.css">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<title>Register</title>
<script src="https://www.google.com/recaptcha/api.js?onload=onloadCallback&render=explicit"
        async defer>
    </script>
<script type="text/javascript"> // calls our reCAPTCHA to render it, as well as provide it our api key
  var onloadCallback = function() {
    grecaptcha.render('html_element', {
      'sitekey' : '6LdZmqsdAAAAAO4mNGwiN-ahp94KfK3MsDSvRRK1' //api key
    });
  };
</script>
</head>
<body>
<header>
<nav>
		<ul class="nav justify-content-center">
			<li class="nav-item"><a class="nav-link" href="../mainpage/mainpage.html">Home page</a></li>
			<li class="nav-item"><a class="nav-link" href="../makeorder/MakeOrder.html">Make order</a></li>
			<li class="nav-item"><a class="nav-link" href="../loginpage/loginpage.html">Log In</a></li>
			<li class="nav-item"><a class="nav-link" href="../registerpage/registerpage.html">Registration</a></li>
		</ul>
</nav>
</header>
<main>
<div class="centercontent" >
<h1>Register</h1>
</div>
<div>
<form onsubmit="register()">
  <div id=g-recaptcha>
    <label for="input">First name:</label>
    <input type="input" id="firstname" name="firstname" pattern="[A-Za-z]+" title="please enter letters only" required title="required"><br><br> <!-- checks to see if the user has input anything that isn't letters. if they have, it will inform the user and not allow a submit. -->
    <label for="input">Last name:</label>
    <input type="input" id="lastname" name="lastname" pattern="[A-Za-z]+" title="please enter letters only" required title="required"><br><br> <!-- checks to see if the user has input anything that isn't letters. if they have, it will inform the user and not allow a submit. -->
    <label for="email">Email:</label>
    <input type="email" id="email" name="email"><br><br>
    <label for="input">Phone Number:</label>
    <input type="input" id="phonenumber" name="phonenumber" pattern="[0-9]+" title="please enter number only" required title="required"><br><br> <!-- checks to see if the user has input anything that isn't numbers. if they have, it will inform the user and not allow a submit. -->
    <span id="emailErrorMessage"></span>
    <label for="password">Password:</label>
    <input type="password" id="password" name="password" pattern=".{6,}"  required title="6 characters minimum">><br><br> <!-- checks to see if the user has input at least 6 characters, if not, it will inform the user and not allow a submit. -->
    <label for="password">Password Confirmation:</label>
    <input type="password" id="passwordconfirmation" name="passwordconfirmation" ><br><br>
  </div>
</form>
<form action="?" method="POST">
  <div id="html_element"></div>
  <br>
  <input type="submit" value="Submit">
</form>
</div>


<script>
  //our variables
  const email = document.getElementById("email"); 
  const password = document.getElementById("password");
  const passConfirmation = document.getElementById("passwordconfirmation");

  function validatePassword(){
    
    if(passConfirmation.value != password.value){ //checks to see if our password is the same value as the confirmation value is.
      passConfirmation.setCustomValidity("Password Confirmation doesn't match Password!"); // if not, it displays a message and will not allow submit.
      
    }

    else {
      passConfirmation.setCustomValidity('');// otherwise, it will not display any message.
  }
    
    
  }

  
  email.addEventListener("email",function(event){ //adds a listener to the id "email"
    
    if(email.validity.typeMismatch){ //if the email does not match the validity check...
      email.setCustomValidity("The email you entered is not in a correct format.Please enter again "); // it will display a message and will not allow submit.
      
    }
    
    
  });

  function register() {
	window.location.href = "../mainpage/mainpage.html";
}

password.onchange = validatePassword; //if the password section changes, it will go to our validatePassword function.
passConfirmation.onkeyup = validatePassword; //if the passwordConfirmation section changes, it will go to our validatePassword function.
  
  </script>

</main>

</body>
</html>